<app-navigation></app-navigation>
<div class="container">
    <div  class="mt-5">
        <h2 class="card-title mb-4">Autos</h2>
        <form class="row g-3" #usuarioForm="ngForm" (ngSubmit)="addAutos()">
            <input type="hidden" name="NumSerie" [(ngModel)]="auto.NumSerie">
            <input type="hidden" name="Kilometraje" [(ngModel)]="auto.Kilometraje">
            <input type="hidden" name="EstadoCarroceria" [(ngModel)]="auto.EstadoCarroceria">
            <input type="hidden" name="Ubicacion" [(ngModel)]="auto.Ubicacion">
            <input type="hidden" name="EstatusAuto" [(ngModel)]="auto.EstatusAuto">
            <input type="hidden" name="ModeloAuto" [(ngModel)]="auto.ModeloAuto">

            <div class="col-md-6">
                <label for="inputNumSerie" class="form-label visually-hidden">Número de Serie</label>
                <input type="text" name="NumSerie" [(ngModel)]="auto.NumSerie" placeholder="Número de Serie" class="form-control mb-3">
            </div>
            <div class="col-md-6">
                <label for="inputKilometraje" class="form-label visually-hidden">Kilometraje</label>
                <input type="text" name="Kilometraje" [(ngModel)]="auto.Kilometraje" placeholder="Kilometraje" class="form-control mb-3">
            </div>
            <div class="col-md-6">
                <select class="form-select" aria-label="Default select example" name="EstadoCarroceria" [(ngModel)]="auto.EstadoCarroceria" aria-placeholder="EstadoCarroceria" aria-describedby="modelo-help">
                    <option disabled selected>Selecciona el estado de carroceria del auto</option>
                    <option value ="Excelente">Excelente</option>
                    <option value ="Buena">Buena</option>
                    <option value ="Mala">Mala</option>
                </select>
                <div id="modelo-help" class="form-text">Selecciona el estado de carroceria que deseas.</div>
            </div>
            <div class="col-md-6">
                <select class="form-select" aria-label="Default select example" name="Ubicación" [(ngModel)]="auto.Ubicacion" aria-placeholder="Ubicación" aria-describedby="modelo-help">
                    <option disabled selected>Selecciona la ubicación del auto</option>
                    <option value ="Libre">Libre</option>
                </select>
                <div id="modelo-help" class="form-text">Selecciona la ubicación que deseas.</div>
            </div>
            <div class="col-md-6">
                <select class="form-select" aria-label="Default select example" name="EstatusAuto" [(ngModel)]="auto.EstatusAuto" aria-placeholder="EstatusAuto" aria-describedby="modelo-help">
                    <option disabled selected>Selecciona el estatus de auto</option>
                    <option value ="Libre" >Libre</option>
                    <option value ="Ocupado" >Ocupado</option>
                </select>
                <div id="modelo-help" class="form-text">Selecciona el estatus de auto que deseas.</div>
            </div>
            <div class="col-md-6">
                <select class="form-select" aria-label="Default select example" name="ModeloAuto" [(ngModel)]="auto.ModeloAuto" aria-placeholder="Modelo" aria-describedby="modelo-help">
                    <option disabled selected>Selecciona el modelo</option>
                    <option *ngFor="let modeloItem of modelos" [value]="modeloItem.Modelo">{{ modeloItem.Modelo }}</option>
                </select>
                <div id="modelo-help" class="form-text">Selecciona el modelo que deseas.</div>
            </div>

            <div class="col-12">
                <button type="submit" class="btn btn-primary me-2" [ngClass]="{'btn-success': modoEdicionAuto}">
                    {{ modoEdicionAuto ? 'Actualizar' : 'Agregar' }} Auto
                </button>
                <button type="button" class="btn btn-danger" *ngIf="modoEdicionAuto" (click)="resetAutoForm()">
                    Cancelar
                </button>
            </div>
        </form>

        
        <h3 class="mt-4">Lista de autos</h3>
        <div class="input-group mb-3">
            <input type="text" [(ngModel)]="filtroNumSerie" (change)="cargarAutos()" placeholder="Buscar por NumSerie" class="form-control">
        </div>
        <div class="overflow-auto">
            <table class="table table-striped" style="overflow-y: auto;">
                <thead>
                    <tr>
                        <th>Número de Serie</th>
                        <th>Kilometraje</th>
                        <th>Estado de Carrocería</th>
                        <th>Ubicación</th>
                        <th>Estatus de Auto</th>
                        <th>Modelo de Auto</th>
                        <th>Operaciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let auto of autos">
                        <td>{{auto.NumSerie}}</td>
                        <td>{{auto.Kilometraje}}</td>
                        <td>{{auto.EstadoCarroceria}}</td>
                        <td>{{auto.Ubicacion}}</td>
                        <td>{{auto.EstatusAuto}}</td>
                        <td>{{auto.ModeloAuto}}</td>
                        <td>
                            <button class="btn btn-success small-btn mr-2" (click)="editarAuto(auto)">
                                <i class="fas fa-pencil-alt"></i>
                            </button>
                            <button class="btn btn-danger small-btn" (click)="deleteAuto(auto._id)">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            
        </div>
</div>
